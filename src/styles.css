@import url("https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500&family=Manrope:wght@400;500;600;700&family=Space+Grotesk:wght@500;600;700&display=swap");

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ── Theme variable definitions ── */

:root,
[data-theme="dark"] {
  color-scheme: dark;

  --ink-50: 248 248 250;
  --ink-100: 238 239 242;
  --ink-200: 221 221 226;
  --ink-300: 197 197 204;
  --ink-400: 154 154 163;
  --ink-500: 107 107 115;
  --ink-600: 74 74 78;
  --ink-700: 54 54 56;
  --ink-800: 38 38 40;
  --ink-900: 26 26 28;
  --ink-950: 19 19 20;

  --canvas-bg: 19 19 20;
  --glass-bg: 19 19 20;
  --glass-opacity: 0.72;
  --glass-dense-opacity: 0.82;
  --scrollbar-thumb: rgba(255, 255, 255, 0.08);
  --scrollbar-thumb-hover: rgba(255, 255, 255, 0.15);
  --selection-color: 248 248 250;
  --canvas-gradient-ember: rgba(217, 119, 87, 0.025);
  --canvas-gradient-ink: rgba(154, 154, 163, 0.012);
  --dot-grid-color: 154 154 163;
  --dot-grid-alpha: 0.09;
  --panel-shadow: 0 1px 3px rgba(0, 0, 0, 0.3), 0 4px 16px rgba(0, 0, 0, 0.2);
}

[data-theme="light"] {
  color-scheme: light;

  --ink-50: 19 19 20;
  --ink-100: 26 26 28;
  --ink-200: 38 38 40;
  --ink-300: 54 54 56;
  --ink-400: 74 74 78;
  --ink-500: 107 107 115;
  --ink-600: 154 154 163;
  --ink-700: 205 205 210;
  --ink-800: 228 226 217;
  --ink-900: 242 241 234;
  --ink-950: 250 249 240;

  --canvas-bg: 250 249 240;
  --glass-bg: 250 249 240;
  --glass-opacity: 0.82;
  --glass-dense-opacity: 0.92;
  --scrollbar-thumb: rgba(0, 0, 0, 0.1);
  --scrollbar-thumb-hover: rgba(0, 0, 0, 0.18);
  --selection-color: 250 249 240;
  --canvas-gradient-ember: rgba(217, 119, 87, 0.04);
  --canvas-gradient-ink: rgba(74, 74, 78, 0.02);
  --dot-grid-color: 74 74 78;
  --dot-grid-alpha: 0.1;
  --panel-shadow: 0 1px 3px rgba(0, 0, 0, 0.06), 0 4px 16px rgba(0, 0, 0, 0.04);
}

@layer base {
  * {
    @apply border-ink-800;
    scrollbar-width: thin;
    scrollbar-color: var(--scrollbar-thumb) transparent;
  }

  *:focus:not(:focus-visible) {
    outline: none;
  }

  *:focus-visible {
    outline: 2px solid rgba(217, 119, 87, 0.55);
    outline-offset: 2px;
  }

  button,
  a,
  input,
  select,
  textarea,
  summary {
    -webkit-tap-highlight-color: rgba(217, 119, 87, 0.22);
  }

  *::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  *::-webkit-scrollbar-track {
    background: transparent;
  }

  *::-webkit-scrollbar-thumb {
    background: var(--scrollbar-thumb);
    border-radius: 999px;
  }

  *::-webkit-scrollbar-thumb:hover {
    background: var(--scrollbar-thumb-hover);
  }

  body {
    @apply m-0 font-body text-ink-50 antialiased;
    background-color: rgb(var(--canvas-bg));
  }

  ::selection {
    background: rgba(217, 119, 87, 0.35);
    color: rgb(var(--selection-color));
  }
}

.bg-canvas {
  background-color: rgb(var(--canvas-bg));
  background-image:
    radial-gradient(circle at 0% 0%, var(--canvas-gradient-ember), transparent 50%),
    radial-gradient(circle at 100% 100%, var(--canvas-gradient-ink), transparent 50%);
}

.ambient-orb {
  position: absolute;
  border-radius: 999px;
  filter: blur(100px);
  pointer-events: none;
  opacity: 0.35;
}

.ambient-orb-a {
  width: 500px;
  height: 500px;
  top: -260px;
  left: -160px;
  background: rgba(217, 119, 87, 0.045);
}

.ambient-orb-b {
  width: 500px;
  height: 500px;
  bottom: -280px;
  right: -180px;
  background: rgba(154, 154, 163, 0.025);
}

.glass-panel {
  background: rgb(var(--glass-bg) / var(--glass-opacity));
  -webkit-backdrop-filter: blur(20px) saturate(1.3);
  backdrop-filter: blur(20px) saturate(1.3);
}

.glass-panel-dense {
  background: rgb(var(--glass-bg) / var(--glass-dense-opacity));
  -webkit-backdrop-filter: blur(16px) saturate(1.2);
  backdrop-filter: blur(16px) saturate(1.2);
}

/* ── Animated border glow ── */

.node-border-glow {
  --glow-fade: 0;
  border-color: transparent !important;
}

.node-border-glow.glow-active {
  --glow-fade: 1;
}

.node-border-glow::before {
  content: "";
  position: absolute;
  inset: -1px;
  border-radius: inherit;
  padding: 1px;
  background: conic-gradient(
    from var(--border-angle, 0deg),
    rgba(217, 119, 87, 0.9) 0%,
    rgba(236, 154, 125, 0.5) 4%,
    rgba(217, 119, 87, 0.18) 10%,
    transparent 18%,
    transparent 42%,
    rgba(217, 119, 87, 0.55) 50%,
    rgba(217, 119, 87, 0.15) 56%,
    transparent 64%,
    transparent 92%,
    rgba(217, 119, 87, 0.15) 96%,
    rgba(217, 119, 87, 0.9) 100%
  );
  -webkit-mask:
    linear-gradient(#fff 0 0) content-box,
    linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  mask:
    linear-gradient(#fff 0 0) content-box,
    linear-gradient(#fff 0 0);
  mask-composite: exclude;
  pointer-events: none;
  z-index: 1;
  opacity: var(--glow-fade);
  transition: opacity 0.6s ease;
}

.node-border-glow::after {
  content: "";
  position: absolute;
  inset: -1px;
  border-radius: inherit;
  opacity: calc(var(--glow-opacity, 0) * var(--glow-fade));
  box-shadow:
    inset 0 0 12px 2px rgba(217, 119, 87, 0.06),
    0 0 16px 2px rgba(217, 119, 87, 0.08);
  pointer-events: none;
  z-index: 0;
  transition: opacity 0.6s ease;
}
